webpackJsonp([17],{QP0I:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("0Njg"),r=i("R2SV"),n={name:"packageView",data:function(){var t=this;return{disabled:!1,width:1e3,height:618,data:{id:null,name:null,userName:null,mark:null},dataUrl:a.S,pageable:!1,params:{},columns:[{field:"id",header:"编号",sort:"id",width:80},{field:"name",header:"接口名称",sort:"name",width:200},{field:"method",header:"METHOD",sort:"method",width:80},{field:"deprecated",header:"废弃",sort:"deprecated",html:!0,width:80,formatter:function(t,e,i){return i?"是".fontcolor("red"):"否"}},{field:"controller",header:"控制器",sort:"controller",width:200},{field:"url",header:"URL",sort:"url",width:120},{field:"java.name",header:"后端服务",sort:"fk_java_id",width:120},{field:"end.name",header:"前端项目",sort:"fk_end_id",width:160},{field:"modifyTime",header:"更新时间",sort:"modify_time",width:200,formatter:function(t,e,i){return Object(r.c)(i)}},{field:"action",header:"操作",width:130,html:!0,actions:[{text:function(t){return'<a href="#/interfaces/view/'+t.id+'" target="_blank">查看</a>'}},{text:"复制",handler:function(e){return t.copy(e)}}]}]}},mounted:function(){var t=this;this.width=this.$el.clientWidth-100,this.$route.params.id&&Object(a.L)(this.$route.params.id).then(function(e){t.data=e,t.params={rows:1e3,idList:t.data.interfacesIdList},t.data.testCaseId&&Object(a.O)(t.data.testCaseId).then(function(e){var i=JSON.parse(e.workflow),a=JSON.parse(e.presetParams);console.log(i),setTimeout(function(){return t.$refs.runner.setData({workflow:i,presetParams:a})},500)})})},methods:{copy:function(t){var e=this,i=t.url.split("/").filter(function(t){return t}).map(function(t){return t[0].toUpperCase()+t.substr(1)}).join("");this.$copyText(","+(i[0].toLowerCase()+i.substr(1))+":'"+t.url+"'").then(function(t){return e.$success("复制成功！")},function(t){return e.$success("复制失败！")})},editTestCase:function(t){this.$router.push("/flow/testCase/edit/"+t)},bindTestCase:function(t){this.$router.push("/flow/testCase/edit?packageId="+t)},run:function(t){this.disabled=!0,this.$refs.runner.run(t)},finished:function(){this.disabled=!1}},components:{"v-datagrid":function(){return i.e(29).then(i.bind(null,"mW4C"))},"v-selector":function(){return i.e(30).then(i.bind(null,"qNHp"))},"v-dialog":function(){return i.e(31).then(i.bind(null,"j9Pd"))},"v-runner":function(){return i.e(33).then(i.bind(null,"V7zm"))}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h4",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),i("hr"),t._v(" "),i("el-form",{attrs:{"label-width":"6em"}},[i("el-form-item",{attrs:{label:"编号："}},[t._v(t._s(t.data.id))]),t._v(" "),i("el-form-item",{attrs:{label:"名称："}},[t._v(t._s(t.data.name))]),t._v(" "),i("el-form-item",{attrs:{label:"创建人："}},[t._v(t._s(t.data.userName))]),t._v(" "),i("el-form-item",{attrs:{label:"备注："}},[i("div",{staticClass:"mark"},[t._v(t._s(t.data.mark))])])],1),t._v(" "),i("h4",{staticClass:"title"},[t._v("包含接口列表")]),t._v(" "),i("hr"),t._v(" "),t.data&&t.data.id?i("v-datagrid",{attrs:{columns:t.columns,"data-url":t.dataUrl,pageable:!1,params:t.params}}):t._e(),t._v(" "),i("h4",{staticClass:"title",staticStyle:{"margin-top":"40px"}},[t._v("测试用例")]),t._v(" "),i("hr"),t._v(" "),t.data.testCaseId&&t.data.id?i("el-form",{attrs:{"label-width":"6em"}},[i("el-form-item",{staticStyle:{"margin-left":"-3em"}},[i("v-runner",{ref:"runner",staticStyle:{"line-height":"20px"},attrs:{width:t.width,height:t.height,finished:t.finished,prepared:t.finished}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"info",icon:"el-icon-back"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),i("el-button",{attrs:{type:"success",icon:t.disabled?"el-icon-loading":"el-icon-magic-stick",disabled:t.disabled},on:{click:function(e){return t.run(!1)}}},[t._v("运行")]),t._v(" "),i("el-button",{attrs:{type:"success",icon:t.disabled?"el-icon-loading":"el-icon-video-camera-solid",disabled:t.disabled},on:{click:function(e){return t.run(!0)}}},[t._v("mock运行")]),t._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-video-camera-solid"},on:{click:function(e){return t.editTestCase(t.data.testCaseId)}}},[t._v("编辑测试用例")])],1)],1):t.data.id?i("el-form",{attrs:{"label-width":"6em"}},[i("el-form-item",[i("el-button",{attrs:{type:"info",icon:"el-icon-back"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline"},on:{click:function(e){return t.bindTestCase(t.data.id)}}},[t._v("绑定测试用例")])],1)],1):t._e()],1)},staticRenderFns:[]};var d=i("C7Lr")(n,s,!1,function(t){i("i1rj")},"data-v-2d6cd29a",null);e.default=d.exports},i1rj:function(t,e){}});
//# sourceMappingURL=17.b78c59779a5fa68559dd.js.map