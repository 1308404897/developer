webpackJsonp([11],{SPYc:function(e,t){},vKqz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r("aA9S"),n=r.n(l),a=r("0Njg"),i=r("R2SV"),o={name:"interfaces",data:function(){var e=this;return{form:{name:null,mark:null},endListApi:a.n,javaListApi:a.G,filter:{id:null,name:null,deprecated:null,url:null,controller:null,javaId:null,endId:null},dataUrl:a.B,countUrl:a.A,params:{},selected:[],toolbar:[{title:"手动录入接口",icon:"el-icon-plus",handler:function(){return e.$router.push("/interfaces/edit")}},{title:"接口打包",icon:"el-icon-box",disabled:function(){return 0===e.selected.length},handler:function(){return e.$refs.packageDialog.open()}}],columns:[{field:"id",header:"编号",sort:"id",width:80},{field:"name",header:"接口名称",sort:"name",width:200},{field:"method",header:"METHOD",sort:"method",width:80},{field:"deprecated",header:"废弃",sort:"deprecated",html:!0,width:80,formatter:function(e,t,r){return r?"是".fontcolor("red"):"否"}},{field:"controller",header:"控制器",sort:"controller",width:200},{field:"url",header:"URL",sort:"url",width:120},{field:"java",header:"后端服务",sort:"fk_java_id",width:120},{field:"end",header:"前端项目",sort:"fk_end_id",width:160},{field:"modifyTime",header:"更新时间",sort:"modify_time",width:200,formatter:function(e,t,r){return Object(i.c)(r)}},{field:"action",header:"操作",width:130,html:!0,actions:[{text:function(e){return'<a href="#/interfaces/view/'+e.id+'" target="_blank">查看</a>'}},{text:"删除",handler:function(t){return e.delete(t.id)}}]}],selectedColumns:[{field:"id",header:"编号",width:80},{field:"name",header:"接口名称",width:200},{field:"url",header:"URL",width:350},{field:"java",header:"后端服务",width:120},{field:"end",header:"前端项目",width:160}]}},mounted:function(){window.that=this},methods:{delete:function(e){var t=this;this.$confirm("删除将无法恢复，确认删除吗？","提示",{type:"warning"}).then(function(){Object(a.i)(e).then(function(){t.$success("删除成功！"),t.search()})})},commitPackage:function(){var e=this;this.$refs.packageForm.validate(function(t){t&&Object(a.e)(n()({interfacesIdList:e.selected.map(function(e){return e.id})},e.form)).then(function(t){e.$success("打包成功！"),e.form.name=null,e.form.mark=null,e.$refs.dg.clearSelections(),e.$refs.packageDialog.close()})})},onSelectionChanged:function(e){var t=this;this.selected.length=0,(e||[]).forEach(function(e){t.selected.push(e)})},search:function(){this.params=Object(i.h)(this.filter)},clear:function(){this.params={},this.filter={}}},components:{"v-datagrid":function(){return r.e(26).then(r.bind(null,"mW4C"))},"v-selector":function(){return r.e(29).then(r.bind(null,"qNHp"))},"v-dialog":function(){return r.e(27).then(r.bind(null,"j9Pd"))}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h4",{staticClass:"title"},[e._v("筛选条件")]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"filters"},[r("el-form",{attrs:{inline:!0,model:e.filter,"label-width":"6em"}},[r("el-form-item",{attrs:{label:"编号"}},[r("el-input",{attrs:{placeholder:"请输入编号"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.id,callback:function(t){e.$set(e.filter,"id",t)},expression:"filter.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"接口名称"}},[r("el-input",{attrs:{placeholder:"请输入接口名称"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"控制器"}},[r("el-input",{attrs:{placeholder:"请输入控制器"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.controller,callback:function(t){e.$set(e.filter,"controller",t)},expression:"filter.controller"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"URL"}},[r("el-input",{attrs:{placeholder:"请输入URL"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.url,callback:function(t){e.$set(e.filter,"url",t)},expression:"filter.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否废弃"}},[r("v-selector",{attrs:{data:{true:"是",false:"否"},onSelectionChanged:function(t){return e.filter.deprecated=(t[0]||{}).id},placeholder:"请选择是否废弃"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"后端服务"}},[r("v-selector",{attrs:{id:"id",text:"name",onSelectionChanged:function(t){return e.filter.javaId=(t[0]||{}).id},filterable:!0,remote:!0,placeholder:"请选择后端服务（可输入名称进行搜索）",url:e.javaListApi}})],1),e._v(" "),r("el-form-item",{attrs:{label:"前端项目"}},[r("v-selector",{attrs:{id:"id",text:"name",onSelectionChanged:function(t){return e.filter.endId=(t[0]||{}).id},filterable:!0,remote:!0,placeholder:"请选择前端项目（可输入名称进行搜索）",url:e.endListApi}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),r("el-button",{attrs:{type:"info",icon:"el-icon-delete"},on:{click:e.clear}},[e._v("清空")])],1)],1)],1),e._v(" "),r("h4",{staticClass:"title"},[e._v("接口列表")]),e._v(" "),r("hr"),e._v(" "),r("v-datagrid",{ref:"dg",attrs:{columns:e.columns,"data-url":e.dataUrl,"count-url":e.countUrl,params:e.params,checkable:!0,toolbar:e.toolbar,onSelectionChanged:e.onSelectionChanged}}),e._v(" "),r("v-dialog",{ref:"packageDialog",attrs:{title:"接口打包",width:1e3,ok:e.commitPackage}},[r("el-form",{ref:"packageForm",attrs:{slot:"body",model:e.form,"label-width":"7em"},slot:"body"},[r("div",{staticClass:"mark margin-bottom20"},[e._v("一个功能（或者需求）的多个接口打包在一起，方便集中管理和查阅")]),e._v(" "),r("el-form-item",{attrs:{prop:"name",label:"打包名称",required:"",rules:[{required:!0,message:"请输入打包名称",trigger:["blur","change"]}]}},[r("el-input",{attrs:{placeholder:"请输入打包名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",rows:"4"},model:{value:e.form.mark,callback:function(t){e.$set(e.form,"mark",t)},expression:"form.mark"}})],1),e._v(" "),r("v-datagrid",{attrs:{columns:e.selectedColumns,"load-data":e.selected,pageable:!1,height:400}}),e._v(" "),r("hr")],1)],1)],1)},staticRenderFns:[]};var c=r("C7Lr")(o,d,!1,function(e){r("SPYc")},"data-v-91b18cf4",null);t.default=c.exports}});
//# sourceMappingURL=11.977bb790fb86bfe89c6e.js.map