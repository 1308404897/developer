webpackJsonp([30],{qNHp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("aA9S"),i=a.n(l),n=a("Q+Ik"),s=a.n(n),o=a("3cXf"),r=a.n(o),d=a("VoE9"),h={name:"selector",props:{id:{type:String,default:"id"},text:{type:String,default:"text"},searchKey:{type:String,default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:null},filterable:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},data:null,load:{type:Array,default:null},url:null,extraParams:{type:Object,default:null},onSelectionChanged:{type:Function,default:null},disabledBol:{type:Boolean,default:!1},disabled:{type:Array,default:function(){return[]}},clearable:{type:Boolean,default:!0}},data:function(){return{searchKey0:null,selections:[],selected:null,loading:!1,params:{},mappedData:{}}},mounted:function(){var e=this;setTimeout(function(){e.init()},100)},watch:{load:function(){var e=(this.load||[]).filter(function(e){return null!=e}),t=this.multiple?[].concat(this.selected):null==this.selected?[]:[this.selected];e.sort().join("|_|")!==t.sort().join("|_|")&&this.loadChanged()},extraParams:function(){var e=this.extraParams||{},t=this.params||{};r()(e)!==r()(t)&&(this.params=e,this.loadChanged(-1))}},methods:{loadParams:function(e){var t={};return e.length>0&&(t.rows=e.length,t[this.id]=e,t[this.id+"List"]=e),t},loadChanged:function(e){var t=this,a=(this.load||[]).filter(function(e){return null!=e});if(-1===e)this.remoteMethod("",this.loadParams(a));else if(a.length>0){((this.selections||[]).filter(function(e){return a.indexOf(e[t.id])>=0})||[]).length!==a.length&&this.remote&&this.url?this.remoteMethod("",this.loadParams(a)):this._setSelectedAsLoad(a)}else this.clear()},_setSelectedAsLoad:function(e){var t=this;setTimeout(function(){t.multiple?t.selected=e:t.selected=e.length>0?e[0]:null},1)},init:function(){this.params=this.extraParams||{},this.searchKey0=this.searchKey||this.text,this.data?this.loadData(this.data):this.remote&&this.url&&this.loadChanged(-1)},loadData:function(e){var t=this;e instanceof Array?this.selections=e:this.selections=s()(e).map(function(e){return{id:e[0],text:e[1]}}),this.mappedData={},this.selections.forEach(function(e){t.mappedData[e[t.id]]=e});var a=(this.load||[]).filter(function(e){return null!=e});this._setSelectedAsLoad(a)},deleteItem:function(e){var t=this,a=this.selections.filter(function(a){return a[t.id]===e})[0],l=this.selections.indexOf(a);l>=0&&this.selections.splice(l,1)},getSelection:function(){var e=this,t=[];if(this.multiple)this.selected.forEach(function(a){return t.push(e.mappedData[a])});else{var a=this.mappedData[this.selected];t=a?[this.mappedData[this.selected]]:[]}return t},clear:function(){this.selected=this.multiple?[]:null},clearAll:function(){this.clear(),this.remoteMethod()},remoteMethod:function(e,t){var a=this;if(this.remote&&this.url){e=(e||"").trim(),this.loading=!0;var l={};l[this.searchKey0]=e,l=i()(l,t,this.params),("string"==typeof this.url?d.a.get(this.url,{params:l}).then(function(e){a.loading=!1,a.loadData(e.extra.data)}):this.url(l).then(function(e){a.loading=!1,a.loadData(e)})).catch(function(){a.loading=!1,a.loadData([])})}},onChange:function(){var e=this.getSelection();0===e.length&&this.remoteMethod(),this.onSelectionChanged&&this.onSelectionChanged(e)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticClass:"form-control",staticStyle:{padding:"0",border:"0"},attrs:{multiple:e.multiple,filterable:e.filterable,remote:e.remote,clearable:e.clearable,placeholder:e.placeholder||(e.multiple?"请输入关键字搜索":"请选择"),"remote-method":e.remoteMethod,loading:e.loading,"remove-tag":e.onChange,clear:e.clearAll,disabled:e.disabledBol},on:{change:e.onChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.selections,function(t,l){return a("el-option",{key:l,attrs:{label:t[e.text],value:t[e.id],disabled:e.disabled.indexOf(t[e.id])>-1}})}),1)},staticRenderFns:[]};var u=a("C7Lr")(h,c,!1,function(e){a("wECk")},"data-v-354e8708",null);t.default=u.exports},wECk:function(e,t){}});
//# sourceMappingURL=30.ec8a4eb2c95329395f8f.js.map