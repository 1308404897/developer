webpackJsonp([31],{qNHp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("aA9S"),i=a.n(l),n=a("Q+Ik"),s=a.n(n),o=a("3cXf"),r=a.n(o),d=a("VoE9"),h={name:"selector",props:{id:{type:String,default:"id"},text:{type:String,default:"text"},searchKey:{type:String,default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:null},filterable:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},data:null,load:{type:Array,default:null},url:null,extraParams:{type:Object,default:null},onSelectionChanged:{type:Function,default:null},disabledBol:{type:Boolean,default:!1},disabled:{type:Array,default:function(){return[]}},clearable:{type:Boolean,default:!0}},data:function(){return{searchKey0:null,selections:[],selected:null,loading:!1,params:{},mappedData:{}}},mounted:function(){var t=this;setTimeout(function(){t.init()},100)},watch:{load:function(){var t=(this.load||[]).filter(function(t){return null!=t}),e=this.multiple?[].concat(this.selected):null==this.selected?[]:[this.selected];t.sort().join("|_|")!==e.sort().join("|_|")&&this.loadChanged()},extraParams:function(){var t=this.extraParams||{},e=this.params||{};r()(t)!==r()(e)&&(this.params=t,this.loadChanged(-1))}},methods:{loadParams:function(t){var e={};return t.length>0&&(e.rows=t.length,e[this.id]=t,e[this.id+"List"]=t),e},loadChanged:function(t){var e=this,a=(this.load||[]).filter(function(t){return null!=t});if(-1===t)this.remoteMethod("",this.loadParams(a));else if(a.length>0){((this.selections||[]).filter(function(t){return a.indexOf(t[e.id])>=0})||[]).length!==a.length&&this.remote&&this.url?this.remoteMethod("",this.loadParams(a)):this._setSelectedAsLoad(a)}else this.clear()},_setSelectedAsLoad:function(t){var e=this;setTimeout(function(){e.multiple?e.selected=t:e.selected=t.length>0?t[0]:null},1)},init:function(){this.params=this.extraParams||{},this.searchKey0=this.searchKey||this.text,this.data?this.loadData(this.data):this.remote&&this.url&&this.loadChanged(-1)},loadData:function(t){var e=this;t instanceof Array?this.selections=t:this.selections=s()(t).map(function(t){return{id:t[0],text:t[1]}}),this.mappedData={},this.selections.forEach(function(t){e.mappedData[t[e.id]]=t});var a=(this.load||[]).filter(function(t){return null!=t});this._setSelectedAsLoad(a)},getSelection:function(){var t=this,e=[];if(this.multiple)this.selected.forEach(function(a){return e.push(t.mappedData[a])});else{var a=this.mappedData[this.selected];e=a?[this.mappedData[this.selected]]:[]}return e},clear:function(){this.selected=this.multiple?[]:null},remoteMethod:function(t,e){var a=this;if(this.remote&&this.url){t=(t||"").trim(),this.loading=!0;var l={};l[this.searchKey0]=t,l=i()(l,e,this.params),("string"==typeof this.url?d.a.get(this.url,{params:l}).then(function(t){a.loading=!1,a.loadData(t.extra.data)}):this.url(l).then(function(t){a.loading=!1,a.loadData(t)})).catch(function(){a.loading=!1,a.loadData([])})}},onChange:function(){var t=this.getSelection();0===t.length&&this.remoteMethod(),this.onSelectionChanged&&this.onSelectionChanged(t)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{staticClass:"form-control",staticStyle:{padding:"0",border:"0"},attrs:{multiple:t.multiple,filterable:t.filterable,remote:t.remote,clearable:t.clearable,placeholder:t.placeholder||(t.multiple?"请输入关键字搜索":"请选择"),"remote-method":t.remoteMethod,loading:t.loading,"remove-tag":t.onChange,clear:t.remoteMethod,disabled:t.disabledBol},on:{change:t.onChange},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.selections,function(e,l){return a("el-option",{key:l,attrs:{label:e[t.text],value:e[t.id],disabled:t.disabled.indexOf(e[t.id])>-1}})}),1)},staticRenderFns:[]};var c=a("C7Lr")(h,u,!1,function(t){a("xYGx")},"data-v-0a94b20b",null);e.default=c.exports},xYGx:function(t,e){}});
//# sourceMappingURL=31.1dd4293a5c72b2544043.js.map