webpackJsonp([1],{Z9Qs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("3cXf"),s=a.n(n),l=a("lC5x"),r=a.n(l),i=a("J0Oq"),c=a.n(i),o=a("0Njg"),u=a("R2SV"),d=a("Dx6B"),v=a("ROW2"),p={props:{},data:function(){return{ENV_DOMAIN_MAP:d.a,data:{id:null,hash:null,name:null,url:null,method:null,parameters:null,returns:null,createTime:null,modifyTime:null,deprecated:null,end:{id:null,name:null,prefix:null,header:null},java:{id:null,name:null}},preParams:[],checkResult:null,checkResultMessage:null,javascript:null,method:"GET",parameters:[],headers:[],env:"testDomain",result:null,bodyParams:null,editingId:null,localDomainKey:"LOCAL_DOMAIN_KEY",defaultLocalDomain:"http://127.0.0.1:8080"}},watch:{env:function(e){this.loadHeaders()}},computed:{showUrl:function(){return Object(o.u)(this.data.java,this.env,this.data.url,this.parameters)}},mounted:function(){this.init(),window.that=this},methods:{configLocalEnv:function(){var e=this,t=this.localDomainKey+"_"+this.data.java.id;this.$prompt("配置本地环境地址","",{inputType:"text",inputValue:v.a.get(t),inputPlaceholder:"请输入配置本地环境地址",inputValidator:function(e){return(e||"").trim().length>0||"请输入配置本地环境地址"}}).then(function(a){v.a.set(t,a.value),e.data.java.localDomain=a.value}).catch(function(e){})},paste:function(e){Object(u.b)(e,this.parameters)},init:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ENV_DOMAIN_MAP.localDomain="本地环境",e.env=e.$route.params.env||e.env,t.next=4,Object(o.v)(e.$route.params.id);case 4:return a=t.sent,t.next=7,Object(o.z)(e.$route.params.id);case 7:e.data=t.sent,e.method=e.data.method||e.method,e.data.java.localDomain=v.a.get(e.localDomainKey+"_"+e.data.java.id)||e.defaultLocalDomain,e.loadHeaders(),a&&null!=a.cusParameters?(e.javascript=null!=a.javascript?JSON.parse(a.javascript):null,e.parameters=JSON.parse(a.cusParameters),e.preParams=null!=a.preParams?JSON.parse(a.preParams):[]):e.parameters=Object(u.d)(e.data.parameters),e.$el.addEventListener("paste",e.paste);case 13:case"end":return t.stop()}},t,e)}))()},loadHeaders:function(){var e=this;this.data.end.id&&Object(o.A)(this.env,this.data.end.id).then(function(t){e.headers=t||[]})},testUrl:function(){var e=this;return c()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.R)(e.showUrl,e.method,e.parameters,e.headers,e.preParams,e.javascript);case 2:a=t.sent,e.result=a.result.data,e.checkResult=a.check,e.checkResultMessage=a.message;case 6:case"end":return t.stop()}},t,e)}))()},addHeader:function(){this.headers.push({key:"",value:""})},delHeader:function(e){this.headers.splice(e,1)},openInterfacesSelectorDialog:function(){var e=this;this.editingId=this.data.end.id,Object(o.D)(this.editingId).then(function(t){var a=t&&t.config?JSON.parse(t.config):{};e.$refs.interfacesSelector.open(a)})},savePrivatesAuth:function(e){Object(o._0)(this.editingId,s()(e))},saveCusTestApi:function(){var e=this;Object(o.Y)(this.data.id,s()(this.parameters),s()(this.javascript),s()(this.preParams)).then(function(t){e.$success("保存成功，可以在【接口自动化测试】>【我的接口列表】查看！")})},addParams:function(){this.parameters.push({key:"",value:"",type:"text"})},addPreParams:function(){this.preParams.push({key:"",value:"",type:"text"})}},components:{"v-jsonformatter":function(){return a.e(30).then(a.bind(null,"9YOq"))},"v-interfaces-selector":function(){return a.e(38).then(a.bind(null,"vTTj"))},"v-parameter-input":function(){return a.e(33).then(a.bind(null,"WfCw"))}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",{staticClass:"title"},[e._v("接口测试: "+e._s(e.data.name))]),e._v(" "),a("hr"),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{width:"140px"},attrs:{label:""}},[a("el-select",{model:{value:e.env,callback:function(t){e.env=t},expression:"env"}},e._l(e.ENV_DOMAIN_MAP,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100px"},attrs:{label:""}},[a("el-select",{attrs:{value:"POST"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[a("el-option",{attrs:{label:"POST",value:"POST"}}),e._v(" "),a("el-option",{attrs:{label:"GET",value:"GET"}}),e._v(" "),a("el-option",{attrs:{label:"PATCH",value:"PATCH"}}),e._v(" "),a("el-option",{attrs:{label:"PUT",value:"PUT"}}),e._v(" "),a("el-option",{attrs:{label:"DELETE",value:"DELETE"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"575px"},model:{value:e.showUrl,callback:function(t){e.showUrl=t},expression:"showUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.testUrl}},[e._v("发射!!!")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.saveCusTestApi}},[e._v("保存设置")]),e._v(" "),e.data.id&&"localDomain"===this.env?a("el-button",{attrs:{type:"info"},on:{click:e.configLocalEnv}},[e._v("配置本地环境")]):e._e()],1)],1),e._v(" "),a("div",[a("div",{staticClass:"left"},[a("h4",{staticClass:"title"},[e._v("返回结果")]),e._v(" "),a("hr"),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:""}},[a("v-jsonformatter",{staticStyle:{"max-height":"500px","overflow-x":"hidden"},attrs:{json:e.result}})],1)],1),e._v(" "),a("h4",{staticClass:"title"},[e._v("检查点结果")]),e._v(" "),a("hr"),e._v(" "),!1===this.checkResult?a("span",[e._v(e._s(this.checkResultMessage))]):!0===this.checkResult?a("span",[e._v("检查点执行成功")]):a("span",[e._v("未设置检查点")])],1),e._v(" "),a("div",{staticClass:"right"},[a("h4",{staticClass:"title",staticStyle:{height:"22px"}},[e._v("header\n          "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"small"},on:{click:function(t){return e.addHeader()}}}),e._v(" "),e.data.end.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:e.openInterfacesSelectorDialog}},[e._v("设置授权账号")]):e._e()],1),e._v(" "),a("hr"),e._v(" "),e.headers?a("el-form",e._l(e.headers,function(t,n){return a("el-form-item",{key:n},[a("el-input",{staticClass:"half_min_width",attrs:{placeholder:"请输入headers参数名"},model:{value:t.key,callback:function(a){e.$set(t,"key",a)},expression:"h.key"}},[a("template",{slot:"prepend"},[a("span",[e._v("参数名")])])],2),e._v(" "),a("span",{staticClass:"v-top"},[e._v("=")]),e._v(" "),a("el-input",{staticClass:"half_max_width",attrs:{placeholder:"请输入headers参数值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"h.value"}},[a("template",{slot:"prepend"},[a("span",[e._v("参数值")])])],2),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(t){return e.delHeader(n)}}})],1)}),1):e._e(),e._v(" "),a("h4",{staticClass:"title"},[e._v("预置参数\n          "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"small"},on:{click:function(t){return e.addPreParams()}}})],1),e._v(" "),a("hr"),e._v(" "),a("v-parameter-input",{attrs:{parameters:e.preParams}}),e._v(" "),a("h4",{staticClass:"title"},[e._v("参数\n          "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"small"},on:{click:function(t){return e.addParams()}}})],1),e._v(" "),a("hr"),e._v(" "),a("v-parameter-input",{attrs:{parameters:e.parameters}}),e._v(" "),a("h4",{staticClass:"title"},[e._v("检查点")]),e._v(" "),a("hr"),e._v(" "),a("el-input",{attrs:{placeholder:"注：本接口的调用结果将存入$this中。\n在这里写入一些检查点脚本，示例：\n\nassert($this.name == null, '返回名称不能为空！')\nassert($this.data.id == null, '返回id不能为空！')\nassert($this.data.id.quantity > 0, '数量必须大于等于零！')\n\n如果报错了，那么整个流程将被终止。",rows:18,type:"textarea"},model:{value:e.javascript,callback:function(t){e.javascript=t},expression:"javascript"}})],1)]),e._v(" "),a("v-interfaces-selector",{ref:"interfacesSelector",attrs:{"on-ok":e.savePrivatesAuth}})],1)},staticRenderFns:[]};var m=a("C7Lr")(p,h,!1,function(e){a("dUEU")},"data-v-8fd3b272",null);t.default=m.exports},dUEU:function(e,t){}});
//# sourceMappingURL=1.6f63f9cdcaba21fbcd3d.js.map