webpackJsonp([16],{a0oW:function(e,t){},mwO3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("0Njg"),n=a("R2SV"),s=a("LLxk"),i={name:"interfacesDetail",data:function(){return{mockUrl:r.G,data:null,formatDate:n.b,returns:null,parameters:null,generatedReturns:null,versioned:[],currentVersioned:null,marks:null,username:Object(s.f)(),columns:[{field:"deprecated",header:"废弃",sort:"deprecated",html:!0,width:80,formatter:function(e,t,a){return a?"是".fontcolor("red"):"否"}},{field:"url",header:"URL地址",sort:"url",width:320},{field:"modifyTime",header:"上次更新时间",sort:"modify_time",width:200,formatter:function(e,t,a){return Object(n.b)(a)}}]}},computed:{},methods:{claimVersioned:function(){var e=this.$refs.dg.getCheckedData();null!=e&&e.length>0?(this.currentVersioned=e[0],this.versionedReturns=JSON.parse(this.currentVersioned.returns),this.versionedGeneratedReturns=Object(n.d)(this.versionedReturns),this.versionedParameters=JSON.parse(this.currentVersioned.parameters)):this.currentVersioned=null,this.$refs.historyDialog.close()},listVersioned:function(){this.$refs.historyDialog.open()},init:function(){var e=this,t=this.$route.params.id;Object(r.s)(t).then(function(t){e.data=t,e.returns=JSON.parse(e.data.returns),e.generatedReturns=Object(n.d)(e.returns),e.parameters=JSON.parse(e.data.parameters)}),Object(r.B)(t).then(function(t){e.versioned=t||[]}),Object(r.r)(t).then(function(t){e.marks=t})},linkTo:function(e,t){this.$router.push("/test/"+e.id+"/"+t)},addMark:function(){var e=this;this.$prompt("添加备注","",{inputType:"textarea",inputPlaceholder:"请输入备注信息",inputValidator:function(e){return(e||"").trim().length>0||"请输入备注信息"}}).then(function(t){var a=e.$route.params.id,n=t.value;Object(r.c)(a,n).then(function(t){e.marks.unshift({user:e.username,createTime:(new Date).getTime(),mark:n})})}).catch(function(e){})}},components:{"v-datagrid":function(){return a.e(23).then(a.bind(null,"mW4C"))},"v-jsonformatter":function(){return a.e(24).then(a.bind(null,"9YOq"))},"v-parameter":function(){return a.e(27).then(a.bind(null,"Kq1y"))},"v-dialog":function(){return a.e(25).then(a.bind(null,"j9Pd"))}},mounted:function(){this.init()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("h4",{staticClass:"title"},[e._v("接口详情 　　\n    "),e.versioned.length>0?a("el-button",{attrs:{type:"primary",circle:"",icon:"el-icon-timer",title:"查看历史版本",size:"small"},on:{click:e.listVersioned}}):e._e()],1),e._v(" "),a("hr"),e._v(" "),e.data?a("el-form",{attrs:{"label-width":"9em"}},[a("el-form-item",{attrs:{label:"接口名称："}},[a("div",[e._v(e._s(e.data.name)),e.data.deprecated?a("b",{staticStyle:{color:"red"}},[e._v("（已废弃）")]):e._e()]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[e._v(e._s(e.currentVersioned.name)),e.currentVersioned.deprecated?a("b",{staticStyle:{color:"red"}},[e._v("（已废弃）")]):e._e()]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"控制器："}},[a("div",[e._v(e._s(e.data.controller))]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[e._v(e._s(e.currentVersioned.controller))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"访问类型："}},[a("div",[e._v(e._s(e.data.method))]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[e._v(e._s(e.currentVersioned.method))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"所属项目："}},[a("div",[e._v(e._s(e.data.end.name))]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[e._v(e._s(e.currentVersioned.end.name))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"header参数说明："}},[a("div",[a("i",{staticStyle:{color:"red"}},[e._v("header名："+e._s(e.data.end.header)),a("br"),e._v(e._s(e.data.end.mark))])]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[a("i",[e._v("header名："+e._s(e.currentVersioned.end.header)),a("br"),e._v(e._s(e.currentVersioned.end.mark))])]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"所属模块："}},[a("div",[e._v(e._s(e.data.java.name))]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[e._v(e._s(e.currentVersioned.java.name))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"开发地址："}},[a("div",[a("a",{attrs:{target:"_blank"},on:{click:function(t){return e.linkTo(e.data,"devDomain")}}},[e._v(e._s(""+e.data.java.devDomain+e.data.url))])]),e._v(" "),a("span",[e._v("mock地址："),a("a",{attrs:{href:e.data.java.devDomain+"/_mock?url="+encodeURIComponent(e.data.url),target:"_blank"}},[e._v(e._s(e.data.java.devDomain+"/_mock?url="+encodeURIComponent(e.data.url)))])])]),e._v(" "),a("el-form-item",{attrs:{label:"测试地址："}},[a("div",[a("a",{attrs:{target:"_blank"},on:{click:function(t){return e.linkTo(e.data,"testDomain")}}},[e._v(e._s(""+e.data.java.testDomain+e.data.url))])]),e._v(" "),a("span",[e._v("mock地址："),a("a",{attrs:{href:e.data.java.testDomain+"/_mock?url="+encodeURIComponent(e.data.url),target:"_blank"}},[e._v(e._s(e.data.java.testDomain+"/_mock?url="+encodeURIComponent(e.data.url)))])])]),e._v(" "),a("el-form-item",{attrs:{label:"预发地址："}},[a("div",[a("a",{attrs:{target:"_blank"},on:{click:function(t){return e.linkTo(e.data,"prevDomain")}}},[e._v(e._s(""+e.data.java.prevDomain+e.data.url))])]),e._v(" "),a("span",[e._v("mock地址："),a("a",{attrs:{href:e.data.java.prevDomain+"/_mock?url="+encodeURIComponent(e.data.url),target:"_blank"}},[e._v(e._s(e.data.java.prevDomain+"/_mock?url="+encodeURIComponent(e.data.url)))])])]),e._v(" "),a("el-form-item",{attrs:{label:"生产地址："}},[a("div",[a("a",{attrs:{target:"_blank"},on:{click:function(t){return e.linkTo(e.data,"onlineDomain")}}},[e._v(e._s(""+e.data.java.onlineDomain+e.data.url))])]),e._v(" "),a("span",[e._v("mock地址："),a("a",{attrs:{href:e.data.java.onlineDomain+"/_mock?url="+encodeURIComponent(e.data.url),target:"_blank"}},[e._v(e._s(e.data.java.onlineDomain+"/_mock?url="+encodeURIComponent(e.data.url)))])])]),e._v(" "),a("el-form-item",{attrs:{label:"备用mock地址："}},[a("div",[a("a",{attrs:{href:e.mockUrl(e.data.hash),target:"_blank"}},[e._v(e._s(e.mockUrl(e.data.hash)))])]),e._v(" "),e.currentVersioned?a("div",{staticClass:"history"},[a("a",{attrs:{href:e.mockUrl(e.currentVersioned.hash),target:"_blank"}},[e._v(e._s(e.mockUrl(e.currentVersioned.hash)))])]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间："}},[e._v(e._s(e.formatDate(e.data.createTime)))]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间："}},[e._v(e._s(e.formatDate(e.data.modifyTime)))]),e._v(" "),a("el-form-item",{attrs:{label:"接口参数："}},[a("v-parameter",{attrs:{json:e.parameters||[]}}),e._v(" "),e.currentVersioned?a("v-parameter",{staticClass:"history",attrs:{json:e.versionedParameters||[]}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"接口说明："}},[a("div",{domProps:{innerHTML:e._s(e.data.mark||"无")}}),e._v(" "),e.currentVersioned?a("div",{staticClass:"history",domProps:{innerHTML:e._s(e.currentVersioned.mark||"无")}}):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"返回值："}},[e.currentVersioned?a("div",[e.generatedReturns?a("v-jsonformatter",{staticStyle:{width:"48%",display:"inline-block"},attrs:{json:e.generatedReturns}}):e._e(),e._v(" "),e.currentVersioned&&e.versionedGeneratedReturns?a("v-jsonformatter",{staticClass:"history",staticStyle:{width:"48%",display:"inline-block"},attrs:{json:e.versionedGeneratedReturns}}):e._e()],1):a("div",[e.generatedReturns?a("v-jsonformatter",{attrs:{json:e.generatedReturns}}):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addMark}},[e._v("添加备注")]),e._v(" "),e._l(e.marks,function(t,r){return e.marks&&e.marks.length>0?a("div",{key:r},[a("span",{staticClass:"user"},[e._v("["+e._s(t.user===e.username?"我":t.user)+"]")]),e._v("　\n        "),a("span",{staticClass:"date"},[e._v("["+e._s(e.formatDate(t.createTime))+"]：")]),e._v("　\n        "),a("span",{staticClass:"mark"},[e._v(e._s(t.mark))])]):e._e()})],2)],1):e._e(),e._v(" "),a("v-dialog",{ref:"historyDialog",attrs:{title:"选择一个历史版本进行对比",width:800,ok:e.claimVersioned}},[a("div",{attrs:{slot:"body"},slot:"body"},[a("v-datagrid",{ref:"dg",attrs:{loadData:e.versioned,checkable:!0,singleCheck:!0,columns:e.columns,pageable:!1}})],1)])],1)},staticRenderFns:[]};var d=a("C7Lr")(i,o,!1,function(e){a("a0oW")},"data-v-2b4418fa",null);t.default=d.exports}});
//# sourceMappingURL=16.a527b8d4084225bd3df3.js.map